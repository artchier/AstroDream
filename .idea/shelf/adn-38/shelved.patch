Index: app/src/main/res/layout/buy_avatar_dialog.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/res/layout/buy_avatar_dialog.xml	(revision c953171e6ebd7f07ad035167c89474f50688dfe6)
+++ app/src/main/res/layout/buy_avatar_dialog.xml	(revision c953171e6ebd7f07ad035167c89474f50688dfe6)
@@ -1,69 +0,0 @@
-<?xml version="1.0" encoding="utf-8"?>
-<androidx.constraintlayout.widget.ConstraintLayout xmlns:android="http://schemas.android.com/apk/res/android"
-    android:layout_width="wrap_content"
-    android:layout_height="wrap_content"
-    android:padding="20dp"
-    xmlns:app="http://schemas.android.com/apk/res-auto"
-    android:background="@drawable/rounded_rectangle2">
-
-    <androidx.constraintlayout.widget.ConstraintLayout
-        android:id="@+id/clPriceAvatar"
-        android:layout_width="wrap_content"
-        android:layout_height="wrap_content"
-        app:layout_constraintStart_toStartOf="parent"
-        app:layout_constraintEnd_toEndOf="parent"
-        app:layout_constraintTop_toTopOf="parent"
-        android:paddingBottom="10dp">
-
-        <ImageView
-            android:id="@+id/ivNasaCoins"
-            android:layout_width="25dp"
-            android:layout_height="24dp"
-            android:background="@drawable/ic_logo"
-            app:layout_constraintStart_toStartOf="parent"
-            app:layout_constraintTop_toTopOf="parent"/>
-
-        <TextView
-            android:layout_width="wrap_content"
-            android:layout_height="wrap_content"
-            android:text="500"
-            android:layout_marginStart="5dp"
-            android:textSize="20sp"
-            android:textColor="@color/white"
-            android:textStyle="bold"
-            app:layout_constraintBottom_toBottomOf="parent"
-            app:layout_constraintTop_toTopOf="parent"
-            app:layout_constraintStart_toEndOf="@id/ivNasaCoins"/>
-    </androidx.constraintlayout.widget.ConstraintLayout>
-
-    <androidx.appcompat.widget.AppCompatButton
-        android:id="@+id/btnComprar"
-        android:layout_width="wrap_content"
-        android:layout_height="wrap_content"
-        android:background="@drawable/button_style"
-        android:backgroundTint="@color/green_haze"
-        android:fontFamily="@font/roboto"
-        android:text="@string/comprar"
-        android:textAllCaps="false"
-        android:textColor="@android:color/white"
-        app:layout_constraintStart_toStartOf="parent"
-        app:layout_constraintTop_toBottomOf="@id/clPriceAvatar"
-        app:layout_constraintEnd_toStartOf="@id/btnCancelar"
-        android:textStyle="bold" />
-
-    <androidx.appcompat.widget.AppCompatButton
-        android:id="@+id/btnCancelar"
-        android:layout_width="wrap_content"
-        android:layout_height="wrap_content"
-        android:background="@drawable/button_style"
-        android:backgroundTint="@color/guardsman_red"
-        android:fontFamily="@font/roboto"
-        android:text="@string/cancelar"
-        android:textAllCaps="false"
-        android:textColor="@android:color/white"
-        app:layout_constraintEnd_toEndOf="parent"
-        app:layout_constraintStart_toEndOf="@id/btnComprar"
-        app:layout_constraintTop_toBottomOf="@id/clPriceAvatar"
-        android:textStyle="bold" />
-
-</androidx.constraintlayout.widget.ConstraintLayout>
\ No newline at end of file
Index: app/src/main/java/com/example/astrodream/AvatarAdapter.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.astrodream\r\n\r\nimport android.content.Context\r\nimport android.view.LayoutInflater\r\nimport android.view.View\r\nimport android.view.ViewGroup\r\nimport android.widget.ImageView\r\nimport androidx.core.content.ContextCompat\r\nimport androidx.core.graphics.drawable.toDrawable\r\nimport androidx.recyclerview.widget.RecyclerView\r\nimport com.google.android.material.dialog.MaterialAlertDialogBuilder\r\n\r\nclass AvatarAdapter(\r\n    private val context: Context,\r\n    private val listAvatars: List<Int>\r\n) :\r\n    RecyclerView.Adapter<AvatarAdapter.AvatarViewHolder>() {\r\n\r\n    class AvatarViewHolder(view: View) : RecyclerView.ViewHolder(view) {\r\n        val avatarImageView: ImageView = view.findViewById(R.id.ivCardAvatar)\r\n    }\r\n\r\n    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): AvatarViewHolder {\r\n        val view =\r\n            LayoutInflater.from(context).inflate(R.layout.recycler_item_avatar, parent, false)\r\n\r\n        return AvatarViewHolder(view)\r\n    }\r\n\r\n    override fun onBindViewHolder(holder: AvatarViewHolder, position: Int) {\r\n        val avatar = listAvatars[position]\r\n\r\n        holder.avatarImageView.setImageResource(avatar)\r\n\r\n        holder.avatarImageView.setOnClickListener {\r\n            MaterialAlertDialogBuilder(context)\r\n                .setView(R.layout.buy_avatar_dialog)\r\n                .setBackgroundInsetTop(100)\r\n                .setBackgroundInsetBottom(100)\r\n                .setBackgroundInsetStart(100)\r\n                .setBackgroundInsetEnd(100)\r\n                .setBackground(\r\n                    ContextCompat.getColor(context, android.R.color.transparent).toDrawable()\r\n                )\r\n                .show()\r\n        }\r\n    }\r\n\r\n    override fun getItemCount() = listAvatars.size\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/astrodream/AvatarAdapter.kt	(revision c953171e6ebd7f07ad035167c89474f50688dfe6)
+++ app/src/main/java/com/example/astrodream/AvatarAdapter.kt	(date 1606345864091)
@@ -5,14 +5,19 @@
 import android.view.View
 import android.view.ViewGroup
 import android.widget.ImageView
-import androidx.core.content.ContextCompat
-import androidx.core.graphics.drawable.toDrawable
+import android.widget.TextView
+import android.widget.Toast
+import androidx.appcompat.app.AlertDialog
 import androidx.recyclerview.widget.RecyclerView
-import com.google.android.material.dialog.MaterialAlertDialogBuilder
+import kotlinx.android.synthetic.main.buy_avatar_dialog.view.*
 
 class AvatarAdapter(
     private val context: Context,
-    private val listAvatars: List<Int>
+    private val listAvatars: List<Int>,
+    private val ivAvatar: ImageView,
+    private val tvTotal: TextView,
+    private val dialog: View,
+    private val buyAvatarDialog: AlertDialog
 ) :
     RecyclerView.Adapter<AvatarAdapter.AvatarViewHolder>() {
 
@@ -33,16 +38,15 @@
         holder.avatarImageView.setImageResource(avatar)
 
         holder.avatarImageView.setOnClickListener {
-            MaterialAlertDialogBuilder(context)
-                .setView(R.layout.buy_avatar_dialog)
-                .setBackgroundInsetTop(100)
-                .setBackgroundInsetBottom(100)
-                .setBackgroundInsetStart(100)
-                .setBackgroundInsetEnd(100)
-                .setBackground(
-                    ContextCompat.getColor(context, android.R.color.transparent).toDrawable()
-                )
-                .show()
+            buyAvatarDialog.show()
+
+            dialog.btnComprar.setOnClickListener {
+                val total =
+                    tvTotal.text.toString().toInt() - dialog.tvPriceAvatar.text.toString().toInt()
+                tvTotal.text = total.toString()
+                ivAvatar.setImageResource(avatar)
+                buyAvatarDialog.dismiss()
+            }
         }
     }
 
Index: app/src/main/AndroidManifest.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    package=\"com.example.astrodream\">\r\n\r\n    <uses-permission android:name=\"android.permission.INTERNET\" />\r\n\r\n    <application\r\n        android:allowBackup=\"true\"\r\n        android:icon=\"@mipmap/ic_astrodream\"\r\n        android:label=\"@string/app_name\"\r\n        android:roundIcon=\"@mipmap/ic_astrodream_round\"\r\n        android:supportsRtl=\"true\"\r\n        android:theme=\"@style/Theme.AstroDream\">\r\n        <activity android:name=\".AvatarActivity\"></activity>\r\n        <activity android:name=\".GlobeActivity\" />\r\n        <activity android:name=\".LoginActivity\" />\r\n        <activity android:name=\".FavoritesActivity\" />\r\n        <activity android:name=\".SplashScreenActivity\">\r\n            <intent-filter>\r\n                <action android:name=\"android.intent.action.MAIN\" />\r\n\r\n                <category android:name=\"android.intent.category.LAUNCHER\" />\r\n            </intent-filter>\r\n        </activity>\r\n        <activity android:name=\".InitialActivity\" />\r\n        <activity android:name=\".UserConfigActivity\" />\r\n        <activity android:name=\".TechActivity\" />\r\n        <activity android:name=\".MarsActivity\" />\r\n    </application>\r\n\r\n</manifest>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/AndroidManifest.xml	(revision c953171e6ebd7f07ad035167c89474f50688dfe6)
+++ app/src/main/AndroidManifest.xml	(date 1606325736453)
@@ -11,7 +11,7 @@
         android:roundIcon="@mipmap/ic_astrodream_round"
         android:supportsRtl="true"
         android:theme="@style/Theme.AstroDream">
-        <activity android:name=".AvatarActivity"></activity>
+        <activity android:name=".AvatarActivity" />
         <activity android:name=".GlobeActivity" />
         <activity android:name=".LoginActivity" />
         <activity android:name=".FavoritesActivity" />
Index: app/src/main/java/com/example/astrodream/SplashScreenActivity.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.astrodream\r\n\r\nimport android.content.Intent\r\nimport androidx.appcompat.app.AppCompatActivity\r\nimport android.os.Bundle\r\nimport android.os.Handler\r\n\r\nclass SplashScreenActivity : AppCompatActivity() {\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        super.onCreate(savedInstanceState)\r\n        setContentView(R.layout.activity_splash_screen)\r\n\r\n        Handler().postDelayed({\r\n            callInitialActivity()\r\n            finish()\r\n        }, 3000)\r\n    }\r\n\r\n    private fun callInitialActivity() {\r\n        val intent = Intent(this, InitialActivity::class.java)\r\n        startActivity(intent)\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/astrodream/SplashScreenActivity.kt	(revision c953171e6ebd7f07ad035167c89474f50688dfe6)
+++ app/src/main/java/com/example/astrodream/SplashScreenActivity.kt	(date 1606327180612)
@@ -17,7 +17,7 @@
     }
 
     private fun callInitialActivity() {
-        val intent = Intent(this, InitialActivity::class.java)
+        val intent = Intent(this, AvatarActivity::class.java)
         startActivity(intent)
     }
 }
\ No newline at end of file
Index: app/src/main/res/layout/activity_avatar.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<androidx.drawerlayout.widget.DrawerLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:id=\"@+id/dlAvatar\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    tools:context=\".AvatarActivity\">\r\n\r\n    <androidx.constraintlayout.widget.ConstraintLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"match_parent\">\r\n\r\n        <include layout=\"@layout/background\" />\r\n\r\n        <com.google.android.material.appbar.MaterialToolbar\r\n            android:id=\"@+id/tbAvatar\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:padding=\"10dp\"\r\n            app:layout_constraintEnd_toEndOf=\"parent\"\r\n            app:layout_constraintStart_toStartOf=\"parent\"\r\n            app:layout_constraintTop_toTopOf=\"parent\"\r\n            app:menu=\"@menu/menu\">\r\n\r\n            <TextView\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:fontFamily=\"@font/homespun_regular\"\r\n                android:text=\"@string/avatar\"\r\n                android:textColor=\"@android:color/white\"\r\n                android:textSize=\"35sp\" />\r\n        </com.google.android.material.appbar.MaterialToolbar>\r\n\r\n        <ImageView\r\n            android:id=\"@+id/ivAvatar\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:background=\"@drawable/ic_avatar_alien\"\r\n            app:layout_constraintEnd_toEndOf=\"parent\"\r\n            app:layout_constraintStart_toStartOf=\"parent\"\r\n            app:layout_constraintTop_toBottomOf=\"@id/tbAvatar\" />\r\n\r\n        <LinearLayout\r\n            android:id=\"@+id/llNasaCoins\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginStart=\"20dp\"\r\n            android:layout_marginTop=\"10dp\"\r\n            android:background=\"@drawable/rounded_rectangle2\"\r\n            android:orientation=\"horizontal\"\r\n            android:padding=\"10dp\"\r\n            app:layout_constraintBottom_toBottomOf=\"@id/ivAvatar\"\r\n            app:layout_constraintStart_toStartOf=\"parent\">\r\n\r\n            <ImageView\r\n                android:layout_width=\"20dp\"\r\n                android:layout_height=\"20dp\"\r\n                android:layout_gravity=\"center\"\r\n                android:background=\"@drawable/ic_logo\" />\r\n\r\n            <TextView\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_gravity=\"center\"\r\n                android:layout_marginStart=\"5dp\"\r\n                android:fontFamily=\"@font/roboto\"\r\n                android:text=\"1000\"\r\n                android:textColor=\"@android:color/white\"\r\n                android:textSize=\"15sp\"\r\n                android:textStyle=\"bold\" />\r\n        </LinearLayout>\r\n\r\n        <LinearLayout\r\n            android:id=\"@+id/llShare\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginTop=\"10dp\"\r\n            android:layout_marginEnd=\"20dp\"\r\n            android:background=\"@drawable/rounded_rectangle2\"\r\n            android:orientation=\"horizontal\"\r\n            android:paddingStart=\"15dp\"\r\n            android:paddingEnd=\"15dp\"\r\n            app:layout_constraintBottom_toBottomOf=\"@id/ivAvatar\"\r\n            app:layout_constraintEnd_toEndOf=\"parent\">\r\n\r\n            <ImageView\r\n                android:layout_width=\"20dp\"\r\n                android:layout_height=\"20dp\"\r\n                android:layout_gravity=\"center\"\r\n                android:background=\"@drawable/ic_share\" />\r\n        </LinearLayout>\r\n\r\n        <LinearLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"250dp\"\r\n            android:layout_marginStart=\"40dp\"\r\n            android:layout_marginEnd=\"40dp\"\r\n            android:background=\"@drawable/rounded_rectangle\"\r\n            android:backgroundTint=\"@color/gigas\"\r\n            app:layout_constraintBottom_toBottomOf=\"parent\"\r\n            app:layout_constraintEnd_toEndOf=\"parent\"\r\n            app:layout_constraintStart_toStartOf=\"parent\"\r\n            app:layout_constraintTop_toBottomOf=\"@id/llNasaCoins\">\r\n\r\n            <androidx.recyclerview.widget.RecyclerView\r\n                android:id=\"@+id/rvAvatar\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_marginTop=\"15dp\"\r\n                android:orientation=\"horizontal\"\r\n                app:layoutManager=\"androidx.recyclerview.widget.LinearLayoutManager\"\r\n                tools:listitem=\"@layout/recycler_item_avatar\" />\r\n        </LinearLayout>\r\n    </androidx.constraintlayout.widget.ConstraintLayout>\r\n\r\n    <com.google.android.material.navigation.NavigationView\r\n        android:id=\"@+id/navigationView\"\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"match_parent\"\r\n        android:layout_gravity=\"end\">\r\n\r\n        <LinearLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"match_parent\"\r\n            android:orientation=\"vertical\">\r\n\r\n            <include layout=\"@layout/header_layout\" />\r\n\r\n            <include layout=\"@layout/lateral_menu\" />\r\n\r\n        </LinearLayout>\r\n    </com.google.android.material.navigation.NavigationView>\r\n\r\n</androidx.drawerlayout.widget.DrawerLayout>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/res/layout/activity_avatar.xml	(revision c953171e6ebd7f07ad035167c89474f50688dfe6)
+++ app/src/main/res/layout/activity_avatar.xml	(date 1606345140859)
@@ -34,12 +34,12 @@
 
         <ImageView
             android:id="@+id/ivAvatar"
-            android:layout_width="wrap_content"
-            android:layout_height="wrap_content"
-            android:background="@drawable/ic_avatar_alien"
+            android:layout_width="105dp"
+            android:layout_height="250dp"
             app:layout_constraintEnd_toEndOf="parent"
             app:layout_constraintStart_toStartOf="parent"
-            app:layout_constraintTop_toBottomOf="@id/tbAvatar" />
+            app:layout_constraintTop_toBottomOf="@id/tbAvatar"
+            app:layout_constraintBottom_toTopOf="@id/llRecyclerAvatar"/>
 
         <LinearLayout
             android:id="@+id/llNasaCoins"
@@ -60,6 +60,7 @@
                 android:background="@drawable/ic_logo" />
 
             <TextView
+                android:id="@+id/tvTotal"
                 android:layout_width="wrap_content"
                 android:layout_height="wrap_content"
                 android:layout_gravity="center"
@@ -92,6 +93,7 @@
         </LinearLayout>
 
         <LinearLayout
+            android:id="@+id/llRecyclerAvatar"
             android:layout_width="match_parent"
             android:layout_height="250dp"
             android:layout_marginStart="40dp"
Index: app/src/main/java/com/example/astrodream/AvatarActivity.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.astrodream\r\n\r\nimport android.content.Intent\r\nimport androidx.appcompat.app.AppCompatActivity\r\nimport android.os.Bundle\r\nimport android.view.Menu\r\nimport android.view.MenuItem\r\nimport androidx.core.content.ContextCompat\r\nimport androidx.core.graphics.drawable.toDrawable\r\nimport androidx.core.view.GravityCompat\r\nimport com.google.android.material.dialog.MaterialAlertDialogBuilder\r\nimport kotlinx.android.synthetic.main.activity_avatar.*\r\nimport kotlinx.android.synthetic.main.activity_globe.*\r\nimport kotlinx.android.synthetic.main.buy_avatar_dialog.*\r\nimport kotlinx.android.synthetic.main.lateral_menu.*\r\n\r\nclass AvatarActivity : AppCompatActivity() {\r\n    lateinit var listAvatar: List<Int>\r\n    lateinit var adapter: AvatarAdapter\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        super.onCreate(savedInstanceState)\r\n        setContentView(R.layout.activity_avatar)\r\n\r\n        //seta a Toolbar\r\n        tbAvatar.title = \"\"\r\n        setSupportActionBar(tbAvatar)\r\n\r\n        //clique do botÃ£o \"Sobre\"\r\n        btnSobre.setOnClickListener {\r\n            MaterialAlertDialogBuilder(this)\r\n                .setBackgroundInsetStart(70)\r\n                .setBackgroundInsetEnd(70)\r\n                .setBackgroundInsetTop(10)\r\n                .setBackgroundInsetBottom(100)\r\n                .setBackground(\r\n                    ContextCompat.getColor(this, android.R.color.transparent).toDrawable()\r\n                )\r\n                .setView(R.layout.astrodialog)\r\n                .show()\r\n        }\r\n\r\n        listAvatar = listOf(\r\n            R.drawable.ic_avatar_alien,\r\n            R.drawable.ic_avatar_astronaut,\r\n            R.drawable.ic_avatar_naked,\r\n            R.drawable.ic_avatar_normal1,\r\n            R.drawable.ic_avatar_normal2,\r\n            R.drawable.ic_avatar_normal3,\r\n            R.drawable.ic_avatar_normal4,\r\n            R.drawable.ic_avatar_normal5,\r\n            R.drawable.ic_avatar_nuts,\r\n            R.drawable.ic_avatar_suit\r\n        )\r\n\r\n        adapter = AvatarAdapter(this, listAvatar)\r\n\r\n        rvAvatar.adapter = adapter\r\n    }\r\n\r\n    override fun onCreateOptionsMenu(menu: Menu?): Boolean {\r\n        menuInflater.inflate(R.menu.menu, menu)\r\n        return super.onCreateOptionsMenu(menu)\r\n    }\r\n\r\n    override fun onOptionsItemSelected(item: MenuItem): Boolean {\r\n        when (item.itemId) {\r\n            R.id.menu_lateral -> {\r\n                dlAvatar.openDrawer(GravityCompat.END)\r\n            }\r\n        }\r\n        return super.onOptionsItemSelected(item)\r\n    }\r\n\r\n    override fun onBackPressed() {\r\n        if (dlAvatar.isDrawerOpen(GravityCompat.END))\r\n            dlAvatar.closeDrawer(GravityCompat.END)\r\n        else\r\n            startActivity(Intent(this, InitialActivity::class.java))\r\n            finish()\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/astrodream/AvatarActivity.kt	(revision c953171e6ebd7f07ad035167c89474f50688dfe6)
+++ app/src/main/java/com/example/astrodream/AvatarActivity.kt	(date 1606345811633)
@@ -1,17 +1,20 @@
 package com.example.astrodream
 
+import android.content.DialogInterface
 import android.content.Intent
-import androidx.appcompat.app.AppCompatActivity
 import android.os.Bundle
 import android.view.Menu
 import android.view.MenuItem
+import android.view.View
+import android.widget.Toast
+import androidx.appcompat.app.AppCompatActivity
+import androidx.appcompat.widget.AppCompatButton
 import androidx.core.content.ContextCompat
 import androidx.core.graphics.drawable.toDrawable
 import androidx.core.view.GravityCompat
 import com.google.android.material.dialog.MaterialAlertDialogBuilder
 import kotlinx.android.synthetic.main.activity_avatar.*
-import kotlinx.android.synthetic.main.activity_globe.*
-import kotlinx.android.synthetic.main.buy_avatar_dialog.*
+import kotlinx.android.synthetic.main.buy_avatar_dialog.view.*
 import kotlinx.android.synthetic.main.lateral_menu.*
 
 class AvatarActivity : AppCompatActivity() {
@@ -52,7 +55,26 @@
             R.drawable.ic_avatar_suit
         )
 
-        adapter = AvatarAdapter(this, listAvatar)
+        val dialog = View.inflate(this, R.layout.buy_avatar_dialog, null)
+        val buyAvatarDialog = MaterialAlertDialogBuilder(this)
+            .setView(dialog)
+            .setBackgroundInsetTop(100)
+            .setBackgroundInsetBottom(100)
+            .setBackgroundInsetStart(100)
+            .setBackgroundInsetEnd(100)
+            .setBackground(
+                ContextCompat.getColor(this, android.R.color.transparent).toDrawable()
+            )
+            .create()
+
+        adapter = AvatarAdapter(
+            this,
+            listAvatar,
+            ivAvatar,
+            tvTotal,
+            dialog,
+            buyAvatarDialog
+        )
 
         rvAvatar.adapter = adapter
     }
@@ -76,6 +98,6 @@
             dlAvatar.closeDrawer(GravityCompat.END)
         else
             startActivity(Intent(this, InitialActivity::class.java))
-            finish()
+        finish()
     }
 }
\ No newline at end of file
